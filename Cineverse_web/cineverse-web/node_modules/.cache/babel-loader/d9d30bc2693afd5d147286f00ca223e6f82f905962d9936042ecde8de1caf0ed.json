{"ast":null,"code":"import{useEffect,useState}from\"react\";import LoginForm from\"./components/auth/LoginForm\";import SplashScreen from\"./components/auth/SplashScreen\";import Header from\"./components/common/Header\";import Sidebar from\"./components/common/Sidebar\";import MoviesSection from\"./components/movies/MoviesSection\";import RoomsSection from\"./components/rooms/RoomsSection\";import SessionsSection from\"./components/sessions/SessionsSection\";import TicketsSection from\"./components/tickets/TicketsSection\";import StarWarsSection from\"./components/common/StarWarsSection\";import UsersSection from\"./components/common/UsersSection\";import ChatWidget from\"./components/common/ChatWidget\";import{fetchData}from\"./utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// ===== AUTH =====\nconst[currentUser,setCurrentUser]=useState(()=>{try{const u=localStorage.getItem(\"currentUser\");return u?JSON.parse(u):null;}catch(e){return null;}});const[isRegister,setIsRegister]=useState(false);const[showSplash,setShowSplash]=useState(true);// ===== UI =====\nconst[sidebarOpen,setSidebarOpen]=useState(false);const[section,setSection]=useState(\"MOVIES\");// ===== DATA =====\nconst[movies,setMovies]=useState([]);const[rooms,setRooms]=useState([]);const[sessions,setSessions]=useState([]);const[selectedSession,setSelectedSession]=useState(null);const[takenSeats,setTakenSeats]=useState([]);const[showSeatModal,setShowSeatModal]=useState(false);// ===== LOAD DATA =====\nuseEffect(()=>{if(currentUser){fetchData(\"http://localhost:8080/api/movies\").then(setMovies);fetchData(\"http://localhost:8080/api/rooms\").then(setRooms);fetchData(\"http://localhost:8080/api/sessions\").then(setSessions);}},[currentUser]);// ===== LOGIN UI =====\nif(showSplash){return/*#__PURE__*/_jsx(SplashScreen,{onComplete:()=>setShowSplash(false)});}if(!currentUser){return/*#__PURE__*/_jsx(LoginForm,{onLoginSuccess:user=>{setCurrentUser(user);try{localStorage.setItem(\"currentUser\",JSON.stringify(user));}catch(e){}},isRegister:isRegister,setIsRegister:setIsRegister});}// ===== APP =====\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Header,{currentUser:currentUser,onMenuToggle:()=>setSidebarOpen(!sidebarOpen)}),/*#__PURE__*/_jsx(Sidebar,{isOpen:sidebarOpen,onSectionChange:section=>{setSection(section);setSidebarOpen(false);},onLogout:()=>{// Limpiar chat al logout\nif(currentUser!==null&&currentUser!==void 0&&currentUser.email){try{localStorage.removeItem(\"cineverse_chat_messages_\".concat(currentUser.email));}catch(e){}}setCurrentUser(null);try{localStorage.removeItem(\"currentUser\");}catch(e){}setSidebarOpen(false);},userRole:currentUser.role}),/*#__PURE__*/_jsxs(\"main\",{className:\"p-6 pt-24\",children:[section===\"MOVIES\"&&/*#__PURE__*/_jsx(MoviesSection,{movies:movies,setMovies:setMovies,isAdmin:currentUser.role!==\"USER\",sessions:sessions,setSessions:setSessions,selectedSession:selectedSession,setSelectedSession:setSelectedSession,setTakenSeats:setTakenSeats}),section===\"ROOMS\"&&/*#__PURE__*/_jsx(RoomsSection,{rooms:rooms,setRooms:setRooms,sessions:sessions,setSessions:setSessions,isAdmin:currentUser.role!==\"USER\",selectedSession:selectedSession,setSelectedSession:setSelectedSession,setTakenSeats:setTakenSeats,setShowSeatModal:setShowSeatModal}),section===\"SESSIONS\"&&/*#__PURE__*/_jsx(SessionsSection,{sessions:sessions,setSessions:setSessions,movies:movies,rooms:rooms,isAdmin:currentUser.role!==\"USER\",selectedSession:selectedSession,setSelectedSession:setSelectedSession,setTakenSeats:setTakenSeats,setShowSeatModal:setShowSeatModal}),section===\"TICKETS\"&&/*#__PURE__*/_jsx(TicketsSection,{sessions:sessions,selectedSession:selectedSession,setSelectedSession:setSelectedSession,takenSeats:takenSeats,setTakenSeats:setTakenSeats}),section===\"STARWARS\"&&currentUser.role!==\"USER\"&&/*#__PURE__*/_jsx(StarWarsSection,{movies:movies,setMovies:setMovies}),section===\"USERS\"&&currentUser.role===\"ADMIN\"&&/*#__PURE__*/_jsx(UsersSection,{}),currentUser&&/*#__PURE__*/_jsx(ChatWidget,{user:currentUser})]})]});}export default App;","map":{"version":3,"names":["useEffect","useState","LoginForm","SplashScreen","Header","Sidebar","MoviesSection","RoomsSection","SessionsSection","TicketsSection","StarWarsSection","UsersSection","ChatWidget","fetchData","jsx","_jsx","jsxs","_jsxs","App","currentUser","setCurrentUser","u","localStorage","getItem","JSON","parse","e","isRegister","setIsRegister","showSplash","setShowSplash","sidebarOpen","setSidebarOpen","section","setSection","movies","setMovies","rooms","setRooms","sessions","setSessions","selectedSession","setSelectedSession","takenSeats","setTakenSeats","showSeatModal","setShowSeatModal","then","onComplete","onLoginSuccess","user","setItem","stringify","className","children","onMenuToggle","isOpen","onSectionChange","onLogout","email","removeItem","concat","userRole","role","isAdmin"],"sources":["C:/WareHouse/school/dam_2do/proyecto/Proyecto Final/Cineverse_web/cineverse-web/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport LoginForm from \"./components/auth/LoginForm\";\nimport SplashScreen from \"./components/auth/SplashScreen\";\nimport Header from \"./components/common/Header\";\nimport Sidebar from \"./components/common/Sidebar\";\nimport MoviesSection from \"./components/movies/MoviesSection\";\nimport RoomsSection from \"./components/rooms/RoomsSection\";\nimport SessionsSection from \"./components/sessions/SessionsSection\";\nimport TicketsSection from \"./components/tickets/TicketsSection\";\nimport StarWarsSection from \"./components/common/StarWarsSection\";\nimport UsersSection from \"./components/common/UsersSection\";\nimport ChatWidget from \"./components/common/ChatWidget\";\nimport { fetchData } from \"./utils/api\";\n\nfunction App() {\n  // ===== AUTH =====\n  const [currentUser, setCurrentUser] = useState(() => {\n    try {\n      const u = localStorage.getItem(\"currentUser\");\n      return u ? JSON.parse(u) : null;\n    } catch (e) {\n      return null;\n    }\n  });\n  const [isRegister, setIsRegister] = useState(false);\n  const [showSplash, setShowSplash] = useState(true);\n\n  // ===== UI =====\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [section, setSection] = useState(\"MOVIES\");\n\n  // ===== DATA =====\n  const [movies, setMovies] = useState([]);\n  const [rooms, setRooms] = useState([]);\n  const [sessions, setSessions] = useState([]);\n  const [selectedSession, setSelectedSession] = useState(null);\n  const [takenSeats, setTakenSeats] = useState([]);\n  const [showSeatModal, setShowSeatModal] = useState(false);\n\n  // ===== LOAD DATA =====\n  useEffect(() => {\n    if (currentUser) {\n      fetchData(\"http://localhost:8080/api/movies\").then(setMovies);\n      fetchData(\"http://localhost:8080/api/rooms\").then(setRooms);\n      fetchData(\"http://localhost:8080/api/sessions\").then(setSessions);\n    }\n  }, [currentUser]);\n\n  // ===== LOGIN UI =====\n  if (showSplash) {\n    return (\n      <SplashScreen onComplete={() => setShowSplash(false)} />\n    );\n  }\n\n  if (!currentUser) {\n    return (\n      <LoginForm\n        onLoginSuccess={(user) => {\n          setCurrentUser(user);\n          try { localStorage.setItem(\"currentUser\", JSON.stringify(user)); } catch (e) {}\n        }}\n        isRegister={isRegister}\n        setIsRegister={setIsRegister}\n      />\n    );\n  }\n\n  // ===== APP =====\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Header\n        currentUser={currentUser}\n        onMenuToggle={() => setSidebarOpen(!sidebarOpen)}\n      />\n\n      <Sidebar\n        isOpen={sidebarOpen}\n        onSectionChange={(section) => {\n          setSection(section);\n          setSidebarOpen(false);\n        }}\n        onLogout={() => {\n          // Limpiar chat al logout\n          if (currentUser?.email) {\n            try {\n              localStorage.removeItem(`cineverse_chat_messages_${currentUser.email}`);\n            } catch (e) {}\n          }\n          setCurrentUser(null);\n          try { localStorage.removeItem(\"currentUser\"); } catch (e) {}\n          setSidebarOpen(false);\n        }}\n        userRole={currentUser.role}\n      />\n\n      <main className=\"p-6 pt-24\">\n\n        {section === \"MOVIES\" && (\n          <MoviesSection\n            movies={movies}\n            setMovies={setMovies}\n            isAdmin={currentUser.role !== \"USER\"}\n            sessions={sessions}\n            setSessions={setSessions}\n            selectedSession={selectedSession}\n            setSelectedSession={setSelectedSession}\n            setTakenSeats={setTakenSeats}\n          />\n        )}\n\n        {section === \"ROOMS\" && (\n          <RoomsSection\n            rooms={rooms}\n            setRooms={setRooms}\n            sessions={sessions}\n            setSessions={setSessions}\n            isAdmin={currentUser.role !== \"USER\"}\n            selectedSession={selectedSession}\n            setSelectedSession={setSelectedSession}\n            setTakenSeats={setTakenSeats}\n            setShowSeatModal={setShowSeatModal}\n          />\n        )}\n\n        {section === \"SESSIONS\" && (\n          <SessionsSection\n            sessions={sessions}\n            setSessions={setSessions}\n            movies={movies}\n            rooms={rooms}\n            isAdmin={currentUser.role !== \"USER\"}\n            selectedSession={selectedSession}\n            setSelectedSession={setSelectedSession}\n            setTakenSeats={setTakenSeats}\n            setShowSeatModal={setShowSeatModal}\n          />\n        )}\n\n        {section === \"TICKETS\" && (\n          <TicketsSection\n            sessions={sessions}\n            selectedSession={selectedSession}\n            setSelectedSession={setSelectedSession}\n            takenSeats={takenSeats}\n            setTakenSeats={setTakenSeats}\n          />\n        )}\n\n        {section === \"STARWARS\" && currentUser.role !== \"USER\" && (\n          <StarWarsSection movies={movies} setMovies={setMovies} />\n        )}\n\n        {section === \"USERS\" && currentUser.role === \"ADMIN\" && (\n          <UsersSection />\n        )}\n\n        {currentUser && <ChatWidget user={currentUser} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}