{"ast":null,"code":"import React from\"react\";import{fetchData,deleteData,putData}from\"../../utils/api\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SeatModal(_ref){let{isOpen,seatInfo,selectedSeat,selectedSession,takenSeats,setTakenSeats,newSeat,setNewSeat,onClose,onRefresh}=_ref;const[confirmAction,setConfirmAction]=React.useState(null);const handleChangeOrDeleteSeat=async action=>{if(action===\"CHANGE\"){const seatNum=Number(newSeat);if(!seatNum){alert(\"Introduce un número válido\");return;}if(seatNum<1||seatNum>selectedSession.room.totalSeats){alert(\"Asiento fuera del rango de la sala\");return;}if(takenSeats.includes(seatNum)){alert(\"Ese asiento ya está ocupado\");return;}setConfirmAction(\"CHANGE\");}else if(action===\"DELETE\"){setConfirmAction(\"DELETE\");}};const handleConfirm=async()=>{if(confirmAction===\"CHANGE\"){await putData(\"http://localhost:8080/api/tickets/session/\".concat(selectedSession.id,\"/seat/\").concat(selectedSeat,\"/change/\").concat(newSeat),{});alert(\"Asiento cambiado\");}else if(confirmAction===\"DELETE\"){await deleteData(\"http://localhost:8080/api/tickets/session/\".concat(selectedSession.id,\"/seat/\").concat(selectedSeat));alert(\"Asiento liberado\");}setConfirmAction(null);onClose();setNewSeat(\"\");onRefresh();};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 w-96 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Informaci\\xF3n del asiento\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-lg\",children:seatInfo}),seatInfo.includes(\"ocupado\")&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,max:selectedSession.room.totalSeats,placeholder:\"Nuevo asiento (1 - \".concat(selectedSession.room.totalSeats,\")\"),className:\"border p-2 w-full mb-3\",value:newSeat,onChange:e=>setNewSeat(e.target.value)}),!confirmAction&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded w-full mb-2 transition-colors\",onClick:()=>handleChangeOrDeleteSeat(\"CHANGE\"),children:\"Cambiar asiento\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\",onClick:()=>handleChangeOrDeleteSeat(\"DELETE\"),children:\"Liberar asiento\"})]}),confirmAction&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-gray-100 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 font-semibold\",children:confirmAction===\"CHANGE\"?\"\\xBFConfirmar cambio al asiento \".concat(newSeat,\"?\"):\"\\xBFConfirmar liberaci\\xF3n del asiento \".concat(selectedSeat,\"?\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded w-full transition-colors\",onClick:handleConfirm,children:\"Confirmar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\",onClick:()=>setConfirmAction(null),children:\"Cancelar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 text-gray-600 hover:text-gray-800 underline transition-colors\",onClick:()=>{setConfirmAction(null);onClose();},children:\"Cerrar\"})]})});}","map":{"version":3,"names":["React","fetchData","deleteData","putData","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SeatModal","_ref","isOpen","seatInfo","selectedSeat","selectedSession","takenSeats","setTakenSeats","newSeat","setNewSeat","onClose","onRefresh","confirmAction","setConfirmAction","useState","handleChangeOrDeleteSeat","action","seatNum","Number","alert","room","totalSeats","includes","handleConfirm","concat","id","className","children","type","min","max","placeholder","value","onChange","e","target","onClick"],"sources":["C:/WareHouse/school/dam_2do/proyecto/Proyecto Final/Cineverse_web/cineverse-web/src/components/tickets/SeatModal.js"],"sourcesContent":["import React from \"react\";\r\nimport { fetchData, deleteData, putData } from \"../../utils/api\";\r\n\r\nexport default function SeatModal({ isOpen, seatInfo, selectedSeat, selectedSession, takenSeats, setTakenSeats, newSeat, setNewSeat, onClose, onRefresh }) {\r\n  const [confirmAction, setConfirmAction] = React.useState(null);\r\n\r\n  const handleChangeOrDeleteSeat = async (action) => {\r\n    if (action === \"CHANGE\") {\r\n      const seatNum = Number(newSeat);\r\n\r\n      if (!seatNum) {\r\n        alert(\"Introduce un número válido\");\r\n        return;\r\n      }\r\n\r\n      if (seatNum < 1 || seatNum > selectedSession.room.totalSeats) {\r\n        alert(\"Asiento fuera del rango de la sala\");\r\n        return;\r\n      }\r\n\r\n      if (takenSeats.includes(seatNum)) {\r\n        alert(\"Ese asiento ya está ocupado\");\r\n        return;\r\n      }\r\n\r\n      setConfirmAction(\"CHANGE\");\r\n    } else if (action === \"DELETE\") {\r\n      setConfirmAction(\"DELETE\");\r\n    }\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (confirmAction === \"CHANGE\") {\r\n      await putData(\r\n        `http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}/change/${newSeat}`,\r\n        {}\r\n      );\r\n      alert(\"Asiento cambiado\");\r\n    } else if (confirmAction === \"DELETE\") {\r\n      await deleteData(\r\n        `http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}`\r\n      );\r\n      alert(\"Asiento liberado\");\r\n    }\r\n\r\n    setConfirmAction(null);\r\n    onClose();\r\n    setNewSeat(\"\");\r\n    onRefresh();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-lg p-6 w-96 text-center\">\r\n        <h3 className=\"text-xl font-bold mb-4\">Información del asiento</h3>\r\n\r\n        <p className=\"mb-4 text-lg\">{seatInfo}</p>\r\n\r\n        {seatInfo.includes(\"ocupado\") && (\r\n          <>\r\n            <input\r\n              type=\"number\"\r\n              min={1}\r\n              max={selectedSession.room.totalSeats}\r\n              placeholder={`Nuevo asiento (1 - ${selectedSession.room.totalSeats})`}\r\n              className=\"border p-2 w-full mb-3\"\r\n              value={newSeat}\r\n              onChange={e => setNewSeat(e.target.value)}\r\n            />\r\n\r\n            {!confirmAction && (\r\n              <>\r\n                <button\r\n                  className=\"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded w-full mb-2 transition-colors\"\r\n                  onClick={() => handleChangeOrDeleteSeat(\"CHANGE\")}\r\n                >\r\n                  Cambiar asiento\r\n                </button>\r\n\r\n                <button\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                  onClick={() => handleChangeOrDeleteSeat(\"DELETE\")}\r\n                >\r\n                  Liberar asiento\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {confirmAction && (\r\n              <div className=\"mt-4 bg-gray-100 p-4 rounded\">\r\n                <p className=\"mb-4 font-semibold\">\r\n                  {confirmAction === \"CHANGE\"\r\n                    ? `¿Confirmar cambio al asiento ${newSeat}?`\r\n                    : `¿Confirmar liberación del asiento ${selectedSeat}?`}\r\n                </p>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                    onClick={handleConfirm}\r\n                  >\r\n                    Confirmar\r\n                  </button>\r\n\r\n                  <button\r\n                    className=\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                    onClick={() => setConfirmAction(null)}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        <button\r\n          className=\"mt-4 text-gray-600 hover:text-gray-800 underline transition-colors\"\r\n          onClick={() => {\r\n            setConfirmAction(null);\r\n            onClose();\r\n          }}\r\n        >\r\n          Cerrar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}