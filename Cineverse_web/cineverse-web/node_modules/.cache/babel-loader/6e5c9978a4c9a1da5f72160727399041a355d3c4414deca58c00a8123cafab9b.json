{"ast":null,"code":"import SockJS from\"sockjs-client\";import{Client}from\"@stomp/stompjs\";let client=null;export function connectChat(onMessage){client=new Client({webSocketFactory:()=>new SockJS(\"http://localhost:8080/ws-chat\"),onConnect:()=>{client.subscribe(\"/topic/messages\",msg=>{onMessage(JSON.parse(msg.body));});}});client.activate();}export function sendMessage(sender,content){if(client){client.publish({destination:\"/app/chat.send\",body:JSON.stringify({sender,content})});}}","map":{"version":3,"names":["SockJS","Client","client","connectChat","onMessage","webSocketFactory","onConnect","subscribe","msg","JSON","parse","body","activate","sendMessage","sender","content","publish","destination","stringify"],"sources":["C:/WareHouse/school/dam_2do/proyecto/Proyecto Final/Cineverse_web/cineverse-web/src/components/chat/ChatService.js"],"sourcesContent":["import SockJS from \"sockjs-client\";\r\nimport { Client } from \"@stomp/stompjs\";\r\n\r\nlet client = null;\r\n\r\nexport function connectChat(onMessage) {\r\n  client = new Client({\r\n    webSocketFactory: () => new SockJS(\"http://localhost:8080/ws-chat\"),\r\n    onConnect: () => {\r\n      client.subscribe(\"/topic/messages\", msg => {\r\n        onMessage(JSON.parse(msg.body));\r\n      });\r\n    }\r\n  });\r\n\r\n  client.activate();\r\n}\r\n\r\nexport function sendMessage(sender, content) {\r\n  if (client) {\r\n    client.publish({\r\n      destination: \"/app/chat.send\",\r\n      body: JSON.stringify({ sender, content })\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,eAAe,CAClC,OAASC,MAAM,KAAQ,gBAAgB,CAEvC,GAAI,CAAAC,MAAM,CAAG,IAAI,CAEjB,MAAO,SAAS,CAAAC,WAAWA,CAACC,SAAS,CAAE,CACrCF,MAAM,CAAG,GAAI,CAAAD,MAAM,CAAC,CAClBI,gBAAgB,CAAEA,CAAA,GAAM,GAAI,CAAAL,MAAM,CAAC,+BAA+B,CAAC,CACnEM,SAAS,CAAEA,CAAA,GAAM,CACfJ,MAAM,CAACK,SAAS,CAAC,iBAAiB,CAAEC,GAAG,EAAI,CACzCJ,SAAS,CAACK,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CAAC,CACjC,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CAEFT,MAAM,CAACU,QAAQ,CAAC,CAAC,CACnB,CAEA,MAAO,SAAS,CAAAC,WAAWA,CAACC,MAAM,CAAEC,OAAO,CAAE,CAC3C,GAAIb,MAAM,CAAE,CACVA,MAAM,CAACc,OAAO,CAAC,CACbC,WAAW,CAAE,gBAAgB,CAC7BN,IAAI,CAAEF,IAAI,CAACS,SAAS,CAAC,CAAEJ,MAAM,CAAEC,OAAQ,CAAC,CAC1C,CAAC,CAAC,CACJ,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}