{"ast":null,"code":"var _jsxFileName = \"C:\\\\WareHouse\\\\school\\\\dam_2do\\\\proyecto\\\\Proyecto Final\\\\Cineverse_web\\\\cineverse-web\\\\src\\\\components\\\\tickets\\\\SeatModal.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { fetchData, deleteData, putData } from \"../../utils/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function SeatModal({\n  isOpen,\n  seatInfo,\n  selectedSeat,\n  selectedSession,\n  takenSeats,\n  setTakenSeats,\n  newSeat,\n  setNewSeat,\n  onClose,\n  onRefresh\n}) {\n  _s();\n  const [confirmAction, setConfirmAction] = React.useState(null);\n  const handleChangeOrDeleteSeat = async action => {\n    if (action === \"CHANGE\") {\n      const seatNum = Number(newSeat);\n      if (!seatNum) {\n        alert(\"Introduce un número válido\");\n        return;\n      }\n      if (seatNum < 1 || seatNum > selectedSession.room.totalSeats) {\n        alert(\"Asiento fuera del rango de la sala\");\n        return;\n      }\n      if (takenSeats.includes(seatNum)) {\n        alert(\"Ese asiento ya está ocupado\");\n        return;\n      }\n      setConfirmAction(\"CHANGE\");\n    } else if (action === \"DELETE\") {\n      setConfirmAction(\"DELETE\");\n    }\n  };\n  const handleConfirm = async () => {\n    if (confirmAction === \"CHANGE\") {\n      await putData(`http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}/change/${newSeat}`, {});\n      alert(\"Asiento cambiado\");\n    } else if (confirmAction === \"DELETE\") {\n      await deleteData(`http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}`);\n      alert(\"Asiento liberado\");\n    }\n    setConfirmAction(null);\n    onClose();\n    setNewSeat(\"\");\n    onRefresh();\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-lg p-6 w-96 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold mb-4\",\n        children: \"Informaci\\xF3n del asiento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4 text-lg\",\n        children: seatInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), seatInfo.includes(\"ocupado\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: 1,\n          max: selectedSession.room.totalSeats,\n          placeholder: `Nuevo asiento (1 - ${selectedSession.room.totalSeats})`,\n          className: \"border p-2 w-full mb-3\",\n          value: newSeat,\n          onChange: e => setNewSeat(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), !confirmAction && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded w-full mb-2 transition-colors\",\n            onClick: () => handleChangeOrDeleteSeat(\"CHANGE\"),\n            children: \"Cambiar asiento\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\",\n            onClick: () => handleChangeOrDeleteSeat(\"DELETE\"),\n            children: \"Liberar asiento\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), confirmAction && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 bg-gray-100 p-4 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-4 font-semibold\",\n            children: confirmAction === \"CHANGE\" ? `¿Confirmar cambio al asiento ${newSeat}?` : `¿Confirmar liberación del asiento ${selectedSeat}?`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded w-full transition-colors\",\n              onClick: handleConfirm,\n              children: \"Confirmar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\",\n              onClick: () => setConfirmAction(null),\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mt-4 text-gray-600 hover:text-gray-800 underline transition-colors\",\n        onClick: () => {\n          setConfirmAction(null);\n          onClose();\n        },\n        children: \"Cerrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(SeatModal, \"DUJ5boRaj9Us0dl2Ug6L2ZzqGrU=\");\n_c = SeatModal;\nvar _c;\n$RefreshReg$(_c, \"SeatModal\");","map":{"version":3,"names":["React","fetchData","deleteData","putData","jsxDEV","_jsxDEV","Fragment","_Fragment","SeatModal","isOpen","seatInfo","selectedSeat","selectedSession","takenSeats","setTakenSeats","newSeat","setNewSeat","onClose","onRefresh","_s","confirmAction","setConfirmAction","useState","handleChangeOrDeleteSeat","action","seatNum","Number","alert","room","totalSeats","includes","handleConfirm","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","min","max","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/WareHouse/school/dam_2do/proyecto/Proyecto Final/Cineverse_web/cineverse-web/src/components/tickets/SeatModal.js"],"sourcesContent":["import React from \"react\";\r\nimport { fetchData, deleteData, putData } from \"../../utils/api\";\r\n\r\nexport default function SeatModal({ isOpen, seatInfo, selectedSeat, selectedSession, takenSeats, setTakenSeats, newSeat, setNewSeat, onClose, onRefresh }) {\r\n  const [confirmAction, setConfirmAction] = React.useState(null);\r\n\r\n  const handleChangeOrDeleteSeat = async (action) => {\r\n    if (action === \"CHANGE\") {\r\n      const seatNum = Number(newSeat);\r\n\r\n      if (!seatNum) {\r\n        alert(\"Introduce un número válido\");\r\n        return;\r\n      }\r\n\r\n      if (seatNum < 1 || seatNum > selectedSession.room.totalSeats) {\r\n        alert(\"Asiento fuera del rango de la sala\");\r\n        return;\r\n      }\r\n\r\n      if (takenSeats.includes(seatNum)) {\r\n        alert(\"Ese asiento ya está ocupado\");\r\n        return;\r\n      }\r\n\r\n      setConfirmAction(\"CHANGE\");\r\n    } else if (action === \"DELETE\") {\r\n      setConfirmAction(\"DELETE\");\r\n    }\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (confirmAction === \"CHANGE\") {\r\n      await putData(\r\n        `http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}/change/${newSeat}`,\r\n        {}\r\n      );\r\n      alert(\"Asiento cambiado\");\r\n    } else if (confirmAction === \"DELETE\") {\r\n      await deleteData(\r\n        `http://localhost:8080/api/tickets/session/${selectedSession.id}/seat/${selectedSeat}`\r\n      );\r\n      alert(\"Asiento liberado\");\r\n    }\r\n\r\n    setConfirmAction(null);\r\n    onClose();\r\n    setNewSeat(\"\");\r\n    onRefresh();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-lg p-6 w-96 text-center\">\r\n        <h3 className=\"text-xl font-bold mb-4\">Información del asiento</h3>\r\n\r\n        <p className=\"mb-4 text-lg\">{seatInfo}</p>\r\n\r\n        {seatInfo.includes(\"ocupado\") && (\r\n          <>\r\n            <input\r\n              type=\"number\"\r\n              min={1}\r\n              max={selectedSession.room.totalSeats}\r\n              placeholder={`Nuevo asiento (1 - ${selectedSession.room.totalSeats})`}\r\n              className=\"border p-2 w-full mb-3\"\r\n              value={newSeat}\r\n              onChange={e => setNewSeat(e.target.value)}\r\n            />\r\n\r\n            {!confirmAction && (\r\n              <>\r\n                <button\r\n                  className=\"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded w-full mb-2 transition-colors\"\r\n                  onClick={() => handleChangeOrDeleteSeat(\"CHANGE\")}\r\n                >\r\n                  Cambiar asiento\r\n                </button>\r\n\r\n                <button\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                  onClick={() => handleChangeOrDeleteSeat(\"DELETE\")}\r\n                >\r\n                  Liberar asiento\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {confirmAction && (\r\n              <div className=\"mt-4 bg-gray-100 p-4 rounded\">\r\n                <p className=\"mb-4 font-semibold\">\r\n                  {confirmAction === \"CHANGE\"\r\n                    ? `¿Confirmar cambio al asiento ${newSeat}?`\r\n                    : `¿Confirmar liberación del asiento ${selectedSeat}?`}\r\n                </p>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                    onClick={handleConfirm}\r\n                  >\r\n                    Confirmar\r\n                  </button>\r\n\r\n                  <button\r\n                    className=\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                    onClick={() => setConfirmAction(null)}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        <button\r\n          className=\"mt-4 text-gray-600 hover:text-gray-800 underline transition-colors\"\r\n          onClick={() => {\r\n            setConfirmAction(null);\r\n            onClose();\r\n          }}\r\n        >\r\n          Cerrar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,UAAU,EAAEC,OAAO,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEjE,eAAe,SAASC,SAASA,CAAC;EAAEC,MAAM;EAAEC,QAAQ;EAAEC,YAAY;EAAEC,eAAe;EAAEC,UAAU;EAAEC,aAAa;EAAEC,OAAO;EAAEC,UAAU;EAAEC,OAAO;EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EACzJ,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,KAAK,CAACsB,QAAQ,CAAC,IAAI,CAAC;EAE9D,MAAMC,wBAAwB,GAAG,MAAOC,MAAM,IAAK;IACjD,IAAIA,MAAM,KAAK,QAAQ,EAAE;MACvB,MAAMC,OAAO,GAAGC,MAAM,CAACX,OAAO,CAAC;MAE/B,IAAI,CAACU,OAAO,EAAE;QACZE,KAAK,CAAC,4BAA4B,CAAC;QACnC;MACF;MAEA,IAAIF,OAAO,GAAG,CAAC,IAAIA,OAAO,GAAGb,eAAe,CAACgB,IAAI,CAACC,UAAU,EAAE;QAC5DF,KAAK,CAAC,oCAAoC,CAAC;QAC3C;MACF;MAEA,IAAId,UAAU,CAACiB,QAAQ,CAACL,OAAO,CAAC,EAAE;QAChCE,KAAK,CAAC,6BAA6B,CAAC;QACpC;MACF;MAEAN,gBAAgB,CAAC,QAAQ,CAAC;IAC5B,CAAC,MAAM,IAAIG,MAAM,KAAK,QAAQ,EAAE;MAC9BH,gBAAgB,CAAC,QAAQ,CAAC;IAC5B;EACF,CAAC;EAED,MAAMU,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAIX,aAAa,KAAK,QAAQ,EAAE;MAC9B,MAAMjB,OAAO,CACX,6CAA6CS,eAAe,CAACoB,EAAE,SAASrB,YAAY,WAAWI,OAAO,EAAE,EACxG,CAAC,CACH,CAAC;MACDY,KAAK,CAAC,kBAAkB,CAAC;IAC3B,CAAC,MAAM,IAAIP,aAAa,KAAK,QAAQ,EAAE;MACrC,MAAMlB,UAAU,CACd,6CAA6CU,eAAe,CAACoB,EAAE,SAASrB,YAAY,EACtF,CAAC;MACDgB,KAAK,CAAC,kBAAkB,CAAC;IAC3B;IAEAN,gBAAgB,CAAC,IAAI,CAAC;IACtBJ,OAAO,CAAC,CAAC;IACTD,UAAU,CAAC,EAAE,CAAC;IACdE,SAAS,CAAC,CAAC;EACb,CAAC;EAED,IAAI,CAACT,MAAM,EAAE,OAAO,IAAI;EAExB,oBACEJ,OAAA;IAAK4B,SAAS,EAAC,4EAA4E;IAAAC,QAAA,eACzF7B,OAAA;MAAK4B,SAAS,EAAC,oDAAoD;MAAAC,QAAA,gBACjE7B,OAAA;QAAI4B,SAAS,EAAC,wBAAwB;QAAAC,QAAA,EAAC;MAAuB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAEnEjC,OAAA;QAAG4B,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAExB;MAAQ;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAEzC5B,QAAQ,CAACoB,QAAQ,CAAC,SAAS,CAAC,iBAC3BzB,OAAA,CAAAE,SAAA;QAAA2B,QAAA,gBACE7B,OAAA;UACEkC,IAAI,EAAC,QAAQ;UACbC,GAAG,EAAE,CAAE;UACPC,GAAG,EAAE7B,eAAe,CAACgB,IAAI,CAACC,UAAW;UACrCa,WAAW,EAAE,sBAAsB9B,eAAe,CAACgB,IAAI,CAACC,UAAU,GAAI;UACtEI,SAAS,EAAC,wBAAwB;UAClCU,KAAK,EAAE5B,OAAQ;UACf6B,QAAQ,EAAEC,CAAC,IAAI7B,UAAU,CAAC6B,CAAC,CAACC,MAAM,CAACH,KAAK;QAAE;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC,EAED,CAAClB,aAAa,iBACbf,OAAA,CAAAE,SAAA;UAAA2B,QAAA,gBACE7B,OAAA;YACE4B,SAAS,EAAC,8FAA8F;YACxGc,OAAO,EAAEA,CAAA,KAAMxB,wBAAwB,CAAC,QAAQ,CAAE;YAAAW,QAAA,EACnD;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETjC,OAAA;YACE4B,SAAS,EAAC,mFAAmF;YAC7Fc,OAAO,EAAEA,CAAA,KAAMxB,wBAAwB,CAAC,QAAQ,CAAE;YAAAW,QAAA,EACnD;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,eACT,CACH,EAEAlB,aAAa,iBACZf,OAAA;UAAK4B,SAAS,EAAC,8BAA8B;UAAAC,QAAA,gBAC3C7B,OAAA;YAAG4B,SAAS,EAAC,oBAAoB;YAAAC,QAAA,EAC9Bd,aAAa,KAAK,QAAQ,GACvB,gCAAgCL,OAAO,GAAG,GAC1C,qCAAqCJ,YAAY;UAAG;YAAAwB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD,CAAC,eAEJjC,OAAA;YAAK4B,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzB7B,OAAA;cACE4B,SAAS,EAAC,uFAAuF;cACjGc,OAAO,EAAEhB,aAAc;cAAAG,QAAA,EACxB;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAETjC,OAAA;cACE4B,SAAS,EAAC,qFAAqF;cAC/Fc,OAAO,EAAEA,CAAA,KAAM1B,gBAAgB,CAAC,IAAI,CAAE;cAAAa,QAAA,EACvC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN;MAAA,eACD,CACH,eAEDjC,OAAA;QACE4B,SAAS,EAAC,oEAAoE;QAC9Ec,OAAO,EAAEA,CAAA,KAAM;UACb1B,gBAAgB,CAAC,IAAI,CAAC;UACtBJ,OAAO,CAAC,CAAC;QACX,CAAE;QAAAiB,QAAA,EACH;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACnB,EAAA,CA/HuBX,SAAS;AAAAwC,EAAA,GAATxC,SAAS;AAAA,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}