{"ast":null,"code":"import React,{useState}from\"react\";import{postData,deleteData,fetchData}from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function RoomsSection(_ref){let{rooms,setRooms,sessions,setSessions,isAdmin,selectedSession,setSelectedSession,setTakenSeats,setShowSeatModal}=_ref;const[newRoomName,setNewRoomName]=useState(\"\");const[newRoomSeats,setNewRoomSeats]=useState(\"\");const[showConfirm,setShowConfirm]=useState(false);const[roomToDelete,setRoomToDelete]=useState(null);const refreshData=async()=>{const roomsData=await fetchData(\"http://localhost:8080/api/rooms\");const sessionsData=await fetchData(\"http://localhost:8080/api/sessions\");setRooms(roomsData);setSessions(sessionsData);if(selectedSession&&!sessionsData.find(s=>s.id===selectedSession.id)){setSelectedSession(null);setTakenSeats([]);setShowSeatModal(false);}};const handleAddRoom=e=>{e.preventDefault();postData(\"http://localhost:8080/api/rooms\",{name:newRoomName,totalSeats:newRoomSeats}).then(()=>{setNewRoomName(\"\");setNewRoomSeats(\"\");return refreshData();});};const handleDeleteRoom=()=>{deleteData(\"http://localhost:8080/api/rooms/\".concat(roomToDelete.id)).then(()=>refreshData()).then(()=>{setShowConfirm(false);setRoomToDelete(null);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Salas\"}),isAdmin&&/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-4 rounded shadow mb-6\",onSubmit:handleAddRoom,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"Crear sala\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2 w-full mb-2\",placeholder:\"Nombre\",value:newRoomName,onChange:e=>setNewRoomName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2 w-full mb-2\",type:\"number\",placeholder:\"Asientos\",value:newRoomSeats,onChange:e=>setNewRoomSeats(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors\",children:\"Crear sala\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:rooms.map(room=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-white p-3 mb-2 rounded shadow flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[room.name,\" \\u2014 \",room.totalSeats,\" asientos\"]}),isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded transition-colors\",onClick:()=>{setRoomToDelete(room);setShowConfirm(true);},children:\"Eliminar\"})]},room.id))}),showConfirm&&roomToDelete&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 w-96 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Eliminar sala\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-6\",children:[\"\\xBFSeguro que quieres eliminar la sala\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:roomToDelete.name}),\"?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-red-600\",children:\"(Se eliminar\\xE1n tambi\\xE9n sus sesiones)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\",onClick:handleDeleteRoom,children:\"Eliminar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\",onClick:()=>{setShowConfirm(false);setRoomToDelete(null);},children:\"Cancelar\"})]})]})})]});}","map":{"version":3,"names":["React","useState","postData","deleteData","fetchData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RoomsSection","_ref","rooms","setRooms","sessions","setSessions","isAdmin","selectedSession","setSelectedSession","setTakenSeats","setShowSeatModal","newRoomName","setNewRoomName","newRoomSeats","setNewRoomSeats","showConfirm","setShowConfirm","roomToDelete","setRoomToDelete","refreshData","roomsData","sessionsData","find","s","id","handleAddRoom","e","preventDefault","name","totalSeats","then","handleDeleteRoom","concat","children","className","onSubmit","placeholder","value","onChange","target","type","map","room","onClick"],"sources":["C:/WareHouse/school/dam_2do/proyecto/Proyecto Final/Cineverse_web/cineverse-web/src/components/rooms/RoomsSection.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { postData, deleteData, fetchData } from \"../../utils/api\";\r\n\r\nexport default function RoomsSection({ rooms, setRooms, sessions, setSessions, isAdmin, selectedSession, setSelectedSession, setTakenSeats, setShowSeatModal }) {\r\n  const [newRoomName, setNewRoomName] = useState(\"\");\r\n  const [newRoomSeats, setNewRoomSeats] = useState(\"\");\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [roomToDelete, setRoomToDelete] = useState(null);\r\n\r\n  const refreshData = async () => {\r\n    const roomsData = await fetchData(\"http://localhost:8080/api/rooms\");\r\n    const sessionsData = await fetchData(\"http://localhost:8080/api/sessions\");\r\n    setRooms(roomsData);\r\n    setSessions(sessionsData);\r\n\r\n    if (selectedSession && !sessionsData.find(s => s.id === selectedSession.id)) {\r\n      setSelectedSession(null);\r\n      setTakenSeats([]);\r\n      setShowSeatModal(false);\r\n    }\r\n  };\r\n\r\n  const handleAddRoom = (e) => {\r\n    e.preventDefault();\r\n    postData(\"http://localhost:8080/api/rooms\", {\r\n      name: newRoomName,\r\n      totalSeats: newRoomSeats\r\n    }).then(() => {\r\n      setNewRoomName(\"\");\r\n      setNewRoomSeats(\"\");\r\n      return refreshData();\r\n    });\r\n  };\r\n\r\n  const handleDeleteRoom = () => {\r\n    deleteData(`http://localhost:8080/api/rooms/${roomToDelete.id}`)\r\n      .then(() => refreshData())\r\n      .then(() => {\r\n        setShowConfirm(false);\r\n        setRoomToDelete(null);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"text-2xl font-bold mb-4\">Salas</h2>\r\n\r\n      {isAdmin && (\r\n        <form className=\"bg-white p-4 rounded shadow mb-6\" onSubmit={handleAddRoom}>\r\n          <h3 className=\"font-bold mb-2\">Crear sala</h3>\r\n          <input\r\n            className=\"border p-2 w-full mb-2\"\r\n            placeholder=\"Nombre\"\r\n            value={newRoomName}\r\n            onChange={e => setNewRoomName(e.target.value)}\r\n          />\r\n          <input\r\n            className=\"border p-2 w-full mb-2\"\r\n            type=\"number\"\r\n            placeholder=\"Asientos\"\r\n            value={newRoomSeats}\r\n            onChange={e => setNewRoomSeats(e.target.value)}\r\n          />\r\n          <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors\">\r\n            Crear sala\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      <ul>\r\n        {rooms.map(room => (\r\n          <li\r\n            key={room.id}\r\n            className=\"bg-white p-3 mb-2 rounded shadow flex justify-between items-center\"\r\n          >\r\n            <span>{room.name} — {room.totalSeats} asientos</span>\r\n            {isAdmin && (\r\n              <button\r\n                className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded transition-colors\"\r\n                onClick={() => {\r\n                  setRoomToDelete(room);\r\n                  setShowConfirm(true);\r\n                }}\r\n              >\r\n                Eliminar\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      {showConfirm && roomToDelete && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-lg p-6 w-96 text-center\">\r\n            <h3 className=\"text-xl font-bold mb-4\">Eliminar sala</h3>\r\n            <p className=\"mb-6\">\r\n              ¿Seguro que quieres eliminar la sala<br />\r\n              <span className=\"font-semibold\">{roomToDelete.name}</span>?\r\n              <br />\r\n              <span className=\"text-sm text-red-600\">\r\n                (Se eliminarán también sus sesiones)\r\n              </span>\r\n            </p>\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                onClick={handleDeleteRoom}\r\n              >\r\n                Eliminar\r\n              </button>\r\n              <button\r\n                className=\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded w-full transition-colors\"\r\n                onClick={() => {\r\n                  setShowConfirm(false);\r\n                  setRoomToDelete(null);\r\n                }}\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}